layui.use("layer",()=>{let e=layui.layer,t=layui.$,l=function(e){let t=/^[0-9]$/,l="";for(let c=0;c<e.length&&t.test(e[c]);c++)l+=e[c];return l};t("#runKey").on("click",()=>{let e=t("#skey").val().split("\n");for(var l=0;l<e.length;l++){let c=e[l],n=c;if(c.indexOf("|")>0){n=c.split("|")[2]}let o=n.replace(/\ /g,"");o.length>0&&t.get("/tool/code/"+o).done(e=>{console.log(e.token);var l="<tr class=ttrr><td class=ttdd>"+e.token+"</td><td>"+o+"</td></tr>";t("#tb").append(l)})}}),t("#runreg").on("click",()=>{let c=t("#listreg").val().split("\n");if(c.length>200)e.msg("You have exceeded${arr.length}行，Please enter fewer than 200 lines"),t("#listreg").val(""),t(".ttre").remove();else for(var n=0;n<c.length;n++){let e=c[n],o=e;if(e.indexOf("|")>0){o=e.split("|")[0]}let i=l(o.replace(/\ /g,""));i.length>0&&t.get("/tool/regtime/"+i).done(e=>{var l="<tr class=ttre><td class='ttrg'>"+e.token+"</td><td>"+i+"</td></tr>";t("#tbt").append(l)})}}),t("#qk").on("click",()=>{t("#skey").val(""),t(".ttrr").remove()}),t("#qkid").on("click",()=>{t("#checklist").val(""),t("#checklistlive").val(""),t("#checklistdie").val("")}),t("#qkreg").on("click",()=>{t("#listreg").val(""),t(".ttre").remove()}),t("#checkliveuid").on("click",()=>{let c=t("#checklist").val().split("\n"),n=[],o=0,i=0;for(var r=0;r<c.length;r++){let e=c[r],s=e;if(e.indexOf("|")>0){s=e.split("|")[0]}let a=l(s.replace(/\ /g,"")),d="https://graph.facebook.com/"+a+"/picture?type=normal";a.length>0&&n.push(fetch(d).then(e=>{/100x100/.test(e.url)?(t("#checklistlive").val(t("#checklistlive").val()+a+"\n"),o++):(t("#checklistdie").val(t("#checklistdie").val()+a+"\n"),i++)}))}Promise.all(n).then(()=>{setTimeout(()=>{e.alert("Total checked："+(o+i)+"items,  Normal："+o+"items")},800)})}),t(document).on("click",".ttdd, .ttrg",function(){var l=t(this).text(),c=t("<input>");t("body").append(c),c.val(l).select(),document.execCommand("copy"),c.remove(),e.msg("Copied: "+l)}),t("#copyok").on("click",()=>{var t=document.getElementById("checklistlive");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),e.msg("Normal IDs have been copied")}),t("#copyno").on("click",()=>{var t=document.getElementById("checklistdie");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),e.msg("Abnormal IDs have been copied")})});layui.use(function(){let $=layui.$;let tableData="/tool/get_country";let table=layui.table;table.render({elem:'#staTable',url:tableData,even:true,cols:[[{field:'continent',align:"center",title:'大陆',},{field:'region',align:"center",title:'地区'},{field:'country',align:"center",title:'国家'},{field:'country_name',align:"center",title:'国家英文'},{field:'country_code_2',align:"center",sort:true,title:'2位代码'},{field:'country_code_3',align:"center",title:'3位代码'},{field:'phone_code',align:"center",title:'电话区号'},{field:'flag',title:'国旗',align:"center",templet:function(d){return'<img src="'+d.flag_url+'" alt="'+d.country+'的国旗" style="width:50px; height:33px;">'}}]],done:function(res,curr,count){let tableCloumn=[{field:"name",index:0},{field:"depth",index:1},{field:"jobNum",index:2}];let start_tr_index=1;let tr_s=$(".layui-table-box table").find("tr");for(let item of tableCloumn){let field=item.field;let index=item.index;let merge_num=0;let merge_tds=[];for(let i=start_tr_index;i<tr_s.length;i++){let cur_td=tr_s.eq(i).find("td").eq(index);let next_td=tr_s.eq(i+1).find("td").eq(index);let cur_text=$(cur_td).text();let next_text=$(next_td).text();if(cur_text==next_text){merge_tds.push(cur_td);merge_num++}else{if(merge_num!=0){$(merge_tds[0]).attr("rowspan",merge_num+1);for(let d=1;d<merge_tds.length;d++){$(merge_tds[d]).addClass("layui-hide")}$(cur_td).addClass("layui-hide")}merge_num=0;merge_tds=[]}}}}})});